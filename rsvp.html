<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP - Ilinca & Alex</title>
    <meta name="theme-color" content="#6B7F4A">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'wedding-primary': '#6B7F4A',
                        'wedding-secondary': '#8B9A6B',
                        'wedding-accent': '#A4B584',
                        'wedding-background': '#F5F3F0',
                        'wedding-text': '#2D3319',
                        'wedding-card': '#FEFCF9',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .font-serif { font-family: 'Georgia', serif; }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            button { min-height: 44px; }
            input, textarea, select { min-height: 44px; font-size: 16px; }
        }
    </style>
</head>
<body class="bg-wedding-background">
    <div id="app" class="min-h-screen bg-wedding-background py-12 px-4">
        <!-- Olive branch background pattern -->
        <div class="absolute inset-0 bg-gradient-to-br from-wedding-background to-orange-100/50">
            <div class="absolute top-10 left-10 opacity-5">
                <svg width="200" height="300" viewBox="0 0 200 300" class="text-wedding-primary">
                    <path d="M50 50 Q 100 80 150 50 Q 120 100 150 150 Q 100 120 50 150 Q 80 100 50 50" fill="currentColor" />
                    <circle cx="130" cy="70" r="8" fill="currentColor" />
                    <circle cx="70" cy="130" r="8" fill="currentColor" />
                    <circle cx="130" cy="130" r="8" fill="currentColor" />
                </svg>
            </div>
            <div class="absolute bottom-10 right-10 opacity-5 rotate-180">
                <svg width="200" height="300" viewBox="0 0 200 300" class="text-wedding-secondary">
                    <path d="M50 50 Q 100 80 150 50 Q 120 100 150 150 Q 100 120 50 150 Q 80 100 50 50" fill="currentColor" />
                    <circle cx="130" cy="70" r="8" fill="currentColor" />
                    <circle cx="70" cy="130" r="8" fill="currentColor" />
                    <circle cx="130" cy="130" r="8" fill="currentColor" />
                </svg>
            </div>
        </div>

        <!-- Banner -->
        <div class="text-center mb-12 relative z-10">
            <div class="bg-wedding-card/90 backdrop-blur-sm border border-wedding-accent/30 rounded-lg p-6 max-w-2xl mx-auto shadow-lg">
                <svg class="w-12 h-12 text-wedding-secondary mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
                <h1 class="text-4xl font-serif text-wedding-text mb-2">Ilinca & Alex</h1>
                <p class="text-xl text-wedding-primary">Ne căsătorim pe 12 Octombrie 2025!</p>
            </div>
        </div>

        <!-- RSVP Form -->
        <div class="w-full max-w-2xl mx-auto border border-wedding-accent/30 shadow-xl bg-wedding-card relative z-10 rounded-lg">
            <div class="text-center pb-6 p-8">
                <h2 class="text-3xl font-serif text-wedding-text">RSVP</h2>
                <p class="text-wedding-primary">Vă rugăm să confirmați prezența</p>
            </div>
            <div class="p-8 pt-0">
                <form id="rsvpForm" class="space-y-8">
                    <!-- Numele tău -->
                    <div class="space-y-2">
                        <label for="name" class="text-wedding-text font-medium block">Numele tău *</label>
                        <input id="name" name="name" type="text" required
                               placeholder="Introduceți numele dvs."
                               class="w-full px-3 py-2 border border-wedding-accent/40 rounded-md focus:border-wedding-primary bg-wedding-card">
                    </div>

                    <!-- Vei participa la eveniment? -->
                    <div class="space-y-4">
                        <label class="text-wedding-text font-medium block">Vei participa la eveniment? *</label>
                        <div class="space-y-3">
                            <label class="flex items-center space-x-2">
                                <input type="radio" name="attending" value="Da" required class="text-wedding-primary">
                                <span class="text-wedding-text">Da, abia aștept să petrecem împreună.</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="radio" name="attending" value="Nu" required class="text-wedding-primary">
                                <span class="text-wedding-text">Nu, nu voi ajunge.</span>
                            </label>
                        </div>
                    </div>

                    <!-- Secțiunea pentru cei care participă -->
                    <div id="attendingSection" class="hidden space-y-8">
                        <!-- Vei veni însoțit(ă)? -->
                        <div class="space-y-4">
                            <label class="text-wedding-text font-medium block">Vei veni însoțit(ă)? *</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="accompanied" value="Da" class="text-wedding-primary">
                                    <span class="text-wedding-text">Da</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="radio" name="accompanied" value="Nu" class="text-wedding-primary">
                                    <span class="text-wedding-text">Nu</span>
                                </label>
                            </div>
                        </div>

                        <!-- Secțiunea Însoțitori -->
                        <div id="accompaniedSection" class="hidden space-y-6 p-6 bg-wedding-accent/10 rounded-lg border border-wedding-accent/20">
                            <h3 class="text-lg font-serif text-wedding-text">Detalii însoțitori</h3>

                            <!-- Câte persoane vin -->
                            <div class="space-y-2">
                                <label for="totalGuests" class="text-wedding-text font-medium block">
                                    Câte persoane vin din partea ta (inclusiv tu)? *
                                </label>
                                <select name="totalGuests" class="w-full px-3 py-2 border border-wedding-accent/40 rounded-md focus:border-wedding-primary bg-wedding-card">
                                    <option value="">Selectați numărul de persoane</option>
                                    <option value="2">2 persoane</option>
                                    <option value="3">3 persoane</option>
                                    <option value="4">4 persoane</option>
                                    <option value="5">5 persoane</option>
                                    <option value="6">6 persoane</option>
                                </select>
                            </div>

                            <!-- Câți sunt copii -->
                            <div class="space-y-2">
                                <label for="children" class="text-wedding-text font-medium block">Câți sunt copii?</label>
                                <input id="children" name="children" type="number" min="0" max="6" placeholder="0"
                                       class="w-full px-3 py-2 border border-wedding-accent/40 rounded-md focus:border-wedding-primary bg-wedding-card">
                            </div>

                            <!-- Numele invitaților -->
                            <div class="space-y-2">
                                <label for="guestNames" class="text-wedding-text font-medium block">
                                    Numele invitaților din partea ta
                                </label>
                                <textarea id="guestNames" name="guestNames" rows="3"
                                          placeholder="Introduceți numele tuturor invitaților..."
                                          class="w-full px-3 py-2 border border-wedding-accent/40 rounded-md focus:border-wedding-primary bg-wedding-card"></textarea>
                            </div>
                        </div>

                        <!-- Secțiunea Preferințe -->
                        <div class="space-y-6 p-6 bg-wedding-secondary/10 rounded-lg border border-wedding-secondary/20">
                            <h3 class="text-lg font-serif text-wedding-text">Preferințe</h3>

                            <!-- Preferințe de meniu -->
                            <div class="space-y-4">
                                <label class="text-wedding-text font-medium block">Aveți preferințe de meniu? *</label>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="menuPreferences" value="Meniu obișnuit" class="text-wedding-primary">
                                        <span class="text-wedding-text">Meniu obișnuit</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="menuPreferences" value="Meniu vegetarian" class="text-wedding-primary">
                                        <span class="text-wedding-text">Meniu vegetarian</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="menuPreferences" value="Altele" class="text-wedding-primary">
                                        <span class="text-wedding-text">Altele</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Detalii pentru "Altele" -->
                            <div id="menuOtherSection" class="hidden space-y-2">
                                <label for="menuOther" class="text-wedding-text font-medium block">
                                    Te rugăm să ne oferi detalii despre preferințele de meniu.
                                </label>
                                <input id="menuOther" name="menuOther" type="text"
                                       placeholder="Detalii preferințe de meniu..."
                                       class="w-full px-3 py-2 border border-wedding-accent/40 rounded-md focus:border-wedding-primary bg-wedding-card">
                            </div>

                            <!-- Transport -->
                            <div class="space-y-4">
                                <label class="text-wedding-text font-medium block">Aveți nevoie de transport? *</label>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="transport" value="Da, spre locație" class="text-wedding-primary">
                                        <span class="text-wedding-text">Da, spre locație</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="transport" value="Da, de la locație" class="text-wedding-primary">
                                        <span class="text-wedding-text">Da, de la locație</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" name="transport" value="Nu" class="text-wedding-primary">
                                        <span class="text-wedding-text">Nu</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-6">
                        <button type="submit" id="submitBtn"
                                class="w-full bg-wedding-primary hover:bg-wedding-primary/90 text-wedding-card py-3 text-lg rounded-md transition-colors">
                            Trimite confirmarea
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <div class="bg-wedding-card rounded-lg p-8 max-w-md w-full text-center">
            <svg class="w-16 h-16 text-wedding-primary mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h3 class="text-2xl font-serif text-wedding-text mb-4">Mulțumim!</h3>
            <p class="text-wedding-primary mb-6">Formular completat cu succes! Ilinca & Alex vă mulțumesc oficial!</p>
            <button onclick="closeModal()" class="bg-wedding-primary text-wedding-card px-6 py-2 rounded-md">
                Închide
            </button>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <div class="bg-wedding-card rounded-lg p-8 max-w-md w-full text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-wedding-primary mx-auto mb-4"></div>
            <h3 class="text-xl font-serif text-wedding-text mb-2">Se trimite...</h3>
            <p class="text-wedding-primary">Vă rugăm să așteptați</p>
        </div>
    </div>

    <script>
        // Form logic
        const form = document.getElementById('rsvpForm');
        const attendingRadios = document.querySelectorAll('input[name="attending"]');
        const accompaniedRadios = document.querySelectorAll('input[name="accompanied"]');
        const menuCheckboxes = document.querySelectorAll('input[name="menuPreferences"]');
        
        // Show/hide sections based on selections
        attendingRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                const attendingSection = document.getElementById('attendingSection');
                if (this.value === 'Da') {
                    attendingSection.classList.remove('hidden');
                } else {
                    attendingSection.classList.add('hidden');
                    // Reset accompanied section when not attending
                    document.getElementById('accompaniedSection').classList.add('hidden');
                }
            });
        });

        accompaniedRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                const accompaniedSection = document.getElementById('accompaniedSection');
                if (this.value === 'Da') {
                    accompaniedSection.classList.remove('hidden');
                } else {
                    accompaniedSection.classList.add('hidden');
                }
            });
        });

        menuCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const menuOtherSection = document.getElementById('menuOtherSection');
                const alteleChecked = document.querySelector('input[name="menuPreferences"][value="Altele"]').checked;
                if (alteleChecked) {
                    menuOtherSection.classList.remove('hidden');
                } else {
                    menuOtherSection.classList.add('hidden');
                }
            });
        });

        // Form submission
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Show loading modal
            document.getElementById('loadingModal').classList.remove('hidden');
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;

            // Collect form data
            const formData = new FormData(form);
            
            // Get all checkbox values
            const menuPreferences = [];
            const menuCheckboxes = document.querySelectorAll('input[name="menuPreferences"]:checked');
            menuCheckboxes.forEach(cb => menuPreferences.push(cb.value));
            
            const transport = [];
            const transportCheckboxes = document.querySelectorAll('input[name="transport"]:checked');
            transportCheckboxes.forEach(cb => transport.push(cb.value));

            const data = {
                timestamp: new Date().toLocaleString('ro-RO', {
                    timeZone: 'Europe/Bucharest',
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                }),
                name: formData.get('name') || '',
                attending: formData.get('attending') || '',
                accompanied: formData.get('accompanied') || 'Nu',
                totalGuests: formData.get('totalGuests') || '1',
                children: formData.get('children') || '0',
                guestNames: formData.get('guestNames') || '',
                menuPreferences: menuPreferences.join(', '),
                menuOther: formData.get('menuOther') || '',
                transport: transport.join(', ')
            };

            console.log('Sending data to Google Sheets:', data);

            try {
                // Send to Google Sheets
                const response = await fetch('https://script.google.com/macros/s/AKfycbxyOq-7GHm5zDpixGcaIjNcuo3RIrO0svso_-2fEUsSQTfv8Eh5WBVwpQF7jte1GJRCSA/exec', {
                    method: 'POST',
                    mode: 'no-cors', // Important for Google Apps Script
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                console.log('Response sent to Google Sheets');
                
                // Hide loading modal
                document.getElementById('loadingModal').classList.add('hidden');
                
                // Show success modal
                document.getElementById('successModal').classList.remove('hidden');
                
            } catch (error) {
                console.error('Error:', error);
                
                // Hide loading modal
                document.getElementById('loadingModal').classList.add('hidden');
                
                // Still show success (Google Sheets might work even if we get an error due to CORS)
                document.getElementById('successModal').classList.remove('hidden');
            }
            
            submitBtn.disabled = false;
        });

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
            // Optionally redirect to home page
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
